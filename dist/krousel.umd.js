!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Krousel=e()}(this,function(){function t(e){return(t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function e(t,i){return(e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,i)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function s(t,n,r){return(s=i()?Reflect.construct:function(t,i,s){var n=[null];n.push.apply(n,i);var r=new(Function.bind.apply(t,n));return s&&e(r,s.prototype),r}).apply(null,arguments)}function n(i){var r="function"==typeof Map?new Map:void 0;return(n=function(i){if(null===i||-1===Function.toString.call(i).indexOf("[native code]"))return i;if("function"!=typeof i)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(i))return r.get(i);r.set(i,n)}function n(){return s(i,arguments,t(this).constructor)}return n.prototype=Object.create(i.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e(n,i)})(i)}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var o,a={SLIDE:"slide",FADE:"fade"},u={appendArrows:null,appendDots:null,arrows:!0,autoplay:!1,autoplaySpeed:3e3,dots:!0,infinite:!0,nextArrow:null,pauseOnHover:!0,prevArrow:null,responsive:null,slidesToShow:1,slidesToScroll:1,speed:300,swipe:!0,transition:a.SLIDE,_forceAppendPrevArrow:!1,_forceAppendNextArrow:!1,draggable:!0,rtl:!1},h=function(t){var e,i;function s(e){var i;return(i=t.call(this)||this).errorCode=e,i}return i=t,(e=s).prototype=Object.create(i.prototype),e.prototype.constructor=e,e.__proto__=i,s}(n(Error)),l={className:"class"},c=function(t,e,i){void 0===e&&(e={}),void 0===i&&(i=null);var s=document.createElement(t);return Object.entries(e).forEach(function(t){var e=t[0];s.setAttribute(l[e]||e,t[1])}),i&&(i instanceof Array?i.forEach(function(t){return s.appendChild(t)}):s.appendChild(i)),s};function d(){return[].slice.call(arguments).filter(function(t){return!!t}).join(" ")}var _=((o={})[a.SLIDE]="k-tr-slide",o[a.FADE]="k-tr-fade",o),p=function(t,e){return t instanceof e},f=Object.values(a),g=["slidesToShow","slidesToScroll","infinite"];function v(t){return t.touches?"touchend"===t.type?t.changedTouches[0].clientX:t.touches[0].clientX:t.clientX}function m(t){t.preventDefault()}return function(){function t(t,e){this._setupOptions=function(t){var e=Object.assign({},t),i=function(t,e,i){return console.warn("Krousel - Invalid option '"+t+"' will be ignored. Expected "+e+", got: "+i)},s=t.appendDots,n=t.transition;s&&!p(s,HTMLElement)&&(i("appendDots","HTMLElement",s.constructor&&s.constructor.name||s.prototype&&s.prototype.name||s),delete e.appendDots),n&&!f.includes(n)&&(i("transition","oneOf "+f.join("|"),n),delete e.transition);var r=Object.assign({},u,e);return r.responsive&&r.responsive.sort(function(t,e){return t.breakpoint-e.breakpoint}),r}(e),this._target=function(t){var e=t;if("string"==typeof t)e=document.getElementById(t);else{if(!p(t,HTMLElement))throw new h(1);e=t}return e}(t),this._initialized=!1,this._currentPage=0,this._dragInitialOffset=0,this._showPrev=this._showPrev.bind(this),this._showNext=this._showNext.bind(this),this._enableTransition=this._enableTransition.bind(this),this._handleResize=this._handleResize.bind(this),this._stopAutoplay=this._stopAutoplay.bind(this),this._startAutoplay=this._startAutoplay.bind(this),this._resumeAutoplay=this._resumeAutoplay.bind(this),this._pauseAutoplay=this._pauseAutoplay.bind(this),this._doAutoplay=this._doAutoplay.bind(this),this._requestNext=this._requestNext.bind(this),this._requestPrev=this._requestPrev.bind(this),this._requestGoTo=this._requestGoTo.bind(this),this._startDragging=this._startDragging.bind(this),this._onDragMouseMove=this._onDragMouseMove.bind(this),this._endDragging=this._endDragging.bind(this),this._handleClickOnSlide=this._handleClickOnSlide.bind(this),this._computeOptions(),this._computeProps(),this._setupDOM(),this._initialized=!0,this._startAutoplay()}var e=t.prototype;return e._computeOptions=function(){var t,e,i={},s=function(t){var e,i=t.responsive,s=null;if(i){for(var n,o=function(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return r(t,void 0);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(t,void 0):void 0}}(t))){i&&(t=i);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}(i);!(n=o()).done;){var a=n.value;if(window.innerWidth<=a.breakpoint){s=a;break}}s&&(s.settings=(e=s.settings,g.reduce(function(t,i){return e.hasOwnProperty(i)&&(t[i]=e[i]),t},{})))}return s}(this._setupOptions);if(s!==this._breakpoint){var n=Object.assign({},this._setupOptions,s&&s.settings);this._options&&(t=this._options,e=n,i=Array.from(new Set(Object.keys(t).concat(Object.keys(e)))).reduce(function(i,s){return t[s]!==e[s]&&(i[s]=e[s]),i},{})),this._breakpoint=s,this._options=n}return i},e._setCssVar=function(t,e){this._target.style.setProperty(t,e)},e._computeProps=function(){var t=this._options,e=t.infinite,i=t.slidesToShow,s=t.slidesToScroll,n=t.transition;this._slideCount=this._initialized?this._track.querySelectorAll(".k-slide:not(.k-slide-cloned)").length:this._target.childElementCount,this._pageCount=Math.ceil((this._slideCount+s-i)/s),this._currentPage=Math.min(this._currentPage,this._pageCount-1),this._hasClones=e&&n===a.SLIDE,this._clonePerSide=this._hasClones?2*i:0},e._setupDOM=function(){var t,e=this,i=this._options,s=i.transition,n=i.speed,r=Array.from(this._target.children);this._target.classList.add("krousel"),this._track=c("div",{className:d("k-track",_[s]),style:(t={transitionDuration:n+"ms"},Object.entries(t).map(function(t){var e=t[1];return t[0].replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})+":"+e}).join(";"))}),this._disableTransition(),this._trackContainer=c("div",{className:"k-track-container"},this._track),this._target.appendChild(this._trackContainer),this._setupArrowsDOM(),this._setupDotsDOM(),this._setCssVar("--slide-didx",this._clonePerSide),this._computeSize(),r.forEach(function(t){t instanceof HTMLElement&&(t.classList.add("k-slide"),e._track.appendChild(t))}),this._hasClones&&this._setupInfiniteDOM(),this._computeSlidesClasses(0),this.__forceReflow(),this._enableTransition(),this._setupListeners()},e._setupInfiniteDOM=function(){for(var t=this,e=Array.from(this._track.querySelectorAll(".k-slide")),i=this._track.firstChild,s=e;s.length<this._clonePerSide;)s=s.concat(e);var n=s.slice(-this._clonePerSide).map(function(t){var e=t.cloneNode(!0);return e.classList.add("k-slide-cloned"),e});s.slice(0,this._clonePerSide).forEach(function(e){var i=e.cloneNode(!0);i.classList.add("k-slide-cloned"),t._track.appendChild(i)}),n.forEach(function(e){return t._track.insertBefore(e,i)})},e._setupArrowsDOM=function(){var t=this._options,e=t._forceAppendPrevArrow,i=t._forceAppendNextArrow,s=t.appendArrows,n=t.nextArrow;if(t.arrows){this._prevArrow=t.prevArrow||c("div"),this._prevArrow.classList.add("k-arrow-left"),this._nextArrow=n||c("div"),this._nextArrow.classList.add("k-arrow-right");var r=s||this._trackContainer;!e&&this._prevArrow.isConnected||(r.childElementCount>0?r.insertBefore(this._prevArrow,r.firstChild):r.appendChild(this._prevArrow)),!i&&this._nextArrow.isConnected||r.appendChild(this._nextArrow)}},e._setupDotsDOM=function(){var t=this._options,e=t.appendDots;if(t.dots){this._dots&&this._dots.remove();var i=new Array(this._pageCount).fill(null).map(function(t){return c("div",{className:"k-dot"})});this._dots=c("div",{className:"k-dots"},i),(e||this._target).appendChild(this._dots)}},e._setupListeners=function(){var t,e,i,s=this,n=this._options,r=n.arrows,o=n.dots,a=n.autoplay,u=n.pauseOnHover,h=n.swipe;if(window.addEventListener("resize",(t=this._handleResize,e=100,function(){clearTimeout(i),i=setTimeout.apply(void 0,[t,e].concat([].slice.call(arguments)))})),this._track.querySelectorAll(".k-slide").forEach(function(t){return t.addEventListener("click",s._handleClickOnSlide,{capture:!0})}),r&&(this._prevArrow.addEventListener("click",this._requestPrev),this._nextArrow.addEventListener("click",this._requestNext)),o&&this._dots.querySelectorAll(".k-dot").forEach(function(t,e){return t.addEventListener("click",function(){return s._requestGoTo(e)})}),a){var l=this._track.querySelectorAll(".k-slide"),c=function(t){!t.currentTarget.contains(t.relatedTarget)&&s._resumeAutoplay()};u&&l.forEach(function(t){t.addEventListener("mouseenter",s._pauseAutoplay),t.addEventListener("mouseout",c)})}if(h){var d=function t(e){window.removeEventListener("mousemove",s._onDragMouseMove),window.removeEventListener("touchmove",s._onDragMouseMove),window.removeEventListener("mouseup",t),window.removeEventListener("touchend",t),s._track.querySelectorAll(".k-slide").forEach(function(t){return t.removeEventListener("dragstart",m)}),s._endDragging(e)},_=function(t){window.addEventListener("mouseup",d),window.addEventListener("touchend",d),window.addEventListener("mousemove",s._onDragMouseMove),window.addEventListener("touchmove",s._onDragMouseMove),s._track.querySelectorAll(".k-slide").forEach(function(t){return t.addEventListener("dragstart",m)}),s._startDragging(t)};this._track.addEventListener("mousedown",_),this._track.addEventListener("touchstart",_)}},e._handleClickOnSlide=function(t){this._isDragging&&(m(t),this._isDragging=!1)},e._computeSlideIdxFromDragX=function(t){var e=this._options,i=e.transition,s=e.slidesToShow,n=Math.round(-t/this._slideWidth-this._clonePerSide);return i!==a.SLIDE&&(n+=this._currentPage*s),n},e._computeDragAmplitude=function(t){return v(t)-this._dragStartX},e._computeDragX=function(t){var e=this._dragInitialOffset+t;return this._options.infinite||(e=Math.min(Math.max(e,-this._slideWidth*(this._slideCount-1)),0)),e},e._startDragging=function(t){var e=this._options.transition===a.SLIDE;this._dragStartX=v(t),this._dragStartTime=Date.now(),this._dragInitialOffset=e?new DOMMatrix(getComputedStyle(this._track).transform).m41:0,this._pauseAutoplay(),e&&this._disableTransition()},e._onDragMouseMove=function(t){var e=this._options.transition,i=this._computeDragAmplitude(t);!this._isDragging&&Math.abs(i)>50&&(this._isDragging=!0);var s=this._computeDragX(i);e===a.SLIDE&&this._track.style.setProperty("--dX",s+"px");var n=this._computeSlideIdxFromDragX(s);this._computeSlidesClasses(n)},e._endDragging=function(t){var e=this,i=this._options,s=i.slidesToScroll,n=i.slidesToShow,r=i.infinite,o=this._computeDragAmplitude(t),a=this._computeDragX(o);setTimeout(function(){e._isDragging=!1},250),this._enableTransition(),this._track.style.removeProperty("--dX");var u=this._computeSlideIdxFromDragX(a),h=Math.round(u/s);if(h===this._currentPage){var l=Date.now()-this._dragStartTime,c=Math.abs(o),d=n*this._slideWidth;l<500&&c>.3*d&&c<d&&(h=this._currentPage-Math.sign(o))}r||(h=Math.min(Math.max(0,h),this._pageCount-1)),this._goToPage(h),this._resumeAutoplay()},e._startAutoplay=function(){this._options.autoplay&&(this._apStopped=!1,this._resumeAutoplay())},e._pauseAutoplay=function(){clearTimeout(this._autoplayTimer)},e._resumeAutoplay=function(){var t=this._options,e=t.autoplaySpeed;t.autoplay&&!this._apStopped&&(clearTimeout(this._autoplayTimer),this._autoplayTimer=setTimeout(this._doAutoplay,e))},e._stopAutoplay=function(){this._apStopped=!0,this._pauseAutoplay()},e._doAutoplay=function(){var t=this._options,e=t.speed,i=t.autoplaySpeed;this._showNext(),this._autoplayTimer=setTimeout(this._doAutoplay,i+e)},e._handleResize=function(){var t=this._options.responsive;if(this._disableTransition(),t){var e=this._computeOptions();this._computeProps(),this._processOptionsChange(e)}this._computeSize(),t&&(this._setupDotsDOM(),this._goToPage(this._currentPage)),this.__forceReflow(),this._enableTransition()},e._processOptionsChange=function(t){["infinite","slidesToShow"].some(function(e){return t.hasOwnProperty(e)})&&(this._track.querySelectorAll(".k-slide-cloned").forEach(function(t){return t.remove()}),this._hasClones&&this._setupInfiniteDOM())},e._cleanUpDOM=function(){},e._computeSlidesClasses=function(t){for(var e=this._options,i=e.dots,s=e.slidesToShow,n=[],r=t;r<t+s;r++){var o=r+this._clonePerSide;n.push(o),r<0?n.push(o+this._slideCount):r>=this._slideCount&&n.push(o-this._slideCount)}if(this._track.querySelectorAll(".k-slide").forEach(function(t,e){n.includes(e)?t.classList.add("k-slide-visible"):t.classList.remove("k-slide-visible")}),this._computeArrowClasses(),i){var a=this._dots.querySelectorAll(".k-dot");a.forEach(function(t){return t.classList.remove("k-current")}),a.length>0&&a[this._currentPage].classList.add("k-current")}},e._computeArrowClasses=function(){var t=this._options;t.arrows&&(t.infinite?(this._prevArrow.classList.remove("k-arrow-disabled"),this._nextArrow.classList.remove("k-arrow-disabled")):(0===this._currentPage?this._prevArrow.classList.add("k-arrow-disabled"):this._prevArrow.classList.remove("k-arrow-disabled"),this._currentPage===this._pageCount-1?this._nextArrow.classList.add("k-arrow-disabled"):this._nextArrow.classList.remove("k-arrow-disabled")))},e._goToPage=function(t){var e=this;if(this.__goToPage_defer)return this.__goToPage_defer(),void this._goToPage(t);var i,s=this._options,n=s.slidesToShow,r=s.slidesToScroll,o=s.speed,a=!1,u=t;t>=this._pageCount?(u=0,a=!0):t<0&&(u=this._pageCount-1,a=!0),this._currentPage=u,i=t>=this._pageCount?this._slideCount:t<0?-n:t*r,t===this._pageCount-1&&i>this._slideCount-n&&(i=this._slideCount-n),i=Math.min(Math.max(i,-n),this._slideCount),this._computeSlidesClasses(i),this._setCssVar("--slide-didx",i+this._clonePerSide),a&&(this.__goToPage_defer=function(){delete e.__goToPage_defer,clearTimeout(e.__goToPage_timer),e._disableTransition(),e._goToPage(u),e.__forceReflow(),e._enableTransition()},this.__goToPage_timer=setTimeout(this.__goToPage_defer,o))},e.__forceReflow=function(){this._reflowTrash=this._track.offsetHeight},e._enableTransition=function(){this._track.classList.remove("k-no-transition")},e._disableTransition=function(){this._track.classList.add("k-no-transition")},e._computeSize=function(){var t=this._options,e=t.transition,i=2*this._clonePerSide;this._slideWidth=this._trackContainer.clientWidth/t.slidesToShow,this._setCssVar("--slide-width",this._slideWidth+"px"),e===a.SLIDE&&(this._track.style.width=(i+this._slideCount)*this._slideWidth+1e3+"px")},e._showNext=function(){(this._options.infinite||this._currentPage<this._pageCount-1)&&this._goToPage(this._currentPage+1)},e._showPrev=function(){(this._options.infinite||this._currentPage>0)&&this._goToPage(this._currentPage-1)},e._requestNext=function(){this._stopAutoplay(),this._showNext()},e._requestPrev=function(){this._stopAutoplay(),this._showPrev()},e._requestGoTo=function(t){this._stopAutoplay(),this._goToPage(t)},t}()});
